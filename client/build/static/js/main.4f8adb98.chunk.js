(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{30:function(e,t,a){e.exports=a(59)},35:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(28),s=(a(35),a(5)),c=a(1),i=a.n(c),m=a(4),u=a(2),o=a(6),p=a.n(o),d=a(3),E=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],l=t[1],s=Object(n.useState)(""),c=Object(u.a)(s,2),o=c[0],E=c[1];Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("login"));if(e){function t(){return(t=Object(m.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("/users",{headers:{authorization:e.token}});case 2:a=t.sent,l(a.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}E(e.token),function(){t.apply(this,arguments)}()}}),[]);var f=function(){var e=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.delete("/users",{data:{id:t},headers:{authorization:o}});case 2:n=a.filter((function(e){return e._id!==t})),l(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"users"},r.a.createElement("div",{className:"container"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"id"),r.a.createElement("th",null,"user"),r.a.createElement("th",null,"password"),r.a.createElement("th",null,"email"),r.a.createElement("th",null,"profile"),r.a.createElement("th",null,"destroy"))),a.map((function(e,t){return r.a.createElement("tbody",{key:t},r.a.createElement("tr",null,r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.password),r.a.createElement("td",null,e.email),r.a.createElement("td",null,r.a.createElement(d.b,{to:"/users/".concat(e._id)},"view profile")),r.a.createElement("td",null,r.a.createElement("button",{type:"submit",onClick:function(){return f(e._id)}},"delete"))))}))),r.a.createElement(d.b,{to:"/users/create"},"create new user"),r.a.createElement("div",null,r.a.createElement(d.b,{to:"/profile"},"profile")),r.a.createElement("div",null,r.a.createElement(d.b,{to:"/auth"},"Auth"))))},f=function(e){var t=Object(s.g)(),a=Object(n.useState)(""),l=Object(u.a)(a,2),c=l[0],o=l[1];Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("login"));o(e.token)}),[]);var E=function(){var e=Object(m.a)(i.a.mark((function e(a){var n,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=a.target.elements[0].value,r=a.target.elements[1].value,l=a.target.elements[2].value,e.next=6,p.a.post("/users/create",{name:n,email:r,password:l},{headers:{authorization:c}});case 6:t.push("/users");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"createUser"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Create new user"),r.a.createElement("form",{onSubmit:function(e){return E(e)}},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{id:"name",name:"name",type:"text",className:"validate",required:!0}),r.a.createElement("label",{htmlFor:"name"},"name"),r.a.createElement("span",{className:"helper-text","data-error":"input name"})),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{id:"email",name:"email",type:"text",className:"validate",required:!0}),r.a.createElement("label",{htmlFor:"email"},"email"),r.a.createElement("span",{className:"helper-text","data-error":"input email"})),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{id:"password",name:"password",type:"password",className:"validate",required:!0}),r.a.createElement("label",{htmlFor:"password"},"password"),r.a.createElement("span",{className:"helper-text","data-error":"input password"})),r.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit"},"Submit",r.a.createElement("i",{className:"material-icons right"},"send"))),r.a.createElement("div",{className:"link",style:{marginTop:"10px"}},r.a.createElement(d.b,{to:"/users"},"all users"))))},h=function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),l=a[0],s=a[1];Object(n.useEffect)((function(){function t(){return(t=Object(m.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("/users/".concat(e.match.params.id));case 2:a=t.sent,s([a.data]);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.match.params.id]);return r.a.createElement("div",{className:"user"},r.a.createElement("div",{className:"container"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"id"),r.a.createElement("th",null,"username"),r.a.createElement("th",null,"password"),r.a.createElement("th",null,"email"),r.a.createElement("th",null,"edit"))),l.map((function(t,a){return r.a.createElement("tbody",{key:a},r.a.createElement("tr",null,r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.password),r.a.createElement("td",null,t.email),r.a.createElement("td",null,r.a.createElement(d.b,{to:"/users/".concat(e.match.params.id,"/edit")},"edit user"))))}))),r.a.createElement("div",null,r.a.createElement(d.b,{to:"/users"},"all users")),r.a.createElement("div",null,r.a.createElement(d.b,{to:"/users/create"},"create user"))))},v=function(e){var t=Object(s.g)(),a=Object(n.useState)(""),l=Object(u.a)(a,2),c=l[0],o=l[1],E=Object(n.useState)({}),f=Object(u.a)(E,2),h=f[0],v=f[1];Object(n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("login"));if(t){function a(){return(a=Object(m.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.post("/users/".concat(e.match.params.id,"/data"),{id:e.match.params.id});case 2:a=t.sent,v(a.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}o(t.token),function(){a.apply(this,arguments)}()}}),[e.match.params.id]);var b=function(){var a=Object(m.a)(i.a.mark((function a(n){var r,l,s;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),r=n.target.elements[0].value,l=n.target.elements[1].value,s=n.target.elements[2].value,a.next=6,p.a.post("/users/".concat(e.match.params.id,"/edit"),{name:r,email:l,password:s,id:e.match.params.id},{headers:{authorization:c}});case 6:t.push("/users");case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"EditUser"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Editing ",h.name," "),r.a.createElement("form",{onSubmit:function(e){return b(e)}},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{id:"name",name:"name",type:"text",className:"validate",required:!0}),r.a.createElement("label",{htmlFor:"name"},"name"),r.a.createElement("span",{className:"helper-text","data-error":"input name"})),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{id:"email",name:"email",type:"text",className:"validate",required:!0}),r.a.createElement("label",{htmlFor:"email"},"email"),r.a.createElement("span",{className:"helper-text","data-error":"input email"})),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{id:"password",name:"password",type:"password",className:"validate",required:!0}),r.a.createElement("label",{htmlFor:"password"},"password"),r.a.createElement("span",{className:"helper-text","data-error":"input password"})),r.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit"},"Submit",r.a.createElement("i",{className:"material-icons right"},"send"))),r.a.createElement("div",{className:"link",style:{marginTop:"10px"}},r.a.createElement(d.b,{to:"/users"},"all users"))))},b=(a(58),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),w=function(){var e=Object(s.g)(),t=Object(n.useState)(""),a=Object(u.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(""),E=Object(u.a)(o,2),f=E[0],h=E[1],v=Object(n.useState)(""),w=Object(u.a)(v,2),g=(w[0],w[1]),N=Object(n.useState)(""),O=Object(u.a)(N,2),j=O[0],x=O[1],y=function(){var t=Object(m.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(l.length>5&&f.length>1)){t.next=12;break}return t.next=3,p.a.post("/auth/login",{email:l,password:f});case 3:a=t.sent,n=a.data,g(n),x(n.message),console.log(n),localStorage.setItem("login",JSON.stringify(n)),n.token&&e.push("/users"),t.next=13;break;case 12:x("\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435");case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(b.test(l)&&f.length>1)){e.next=7;break}return e.next=3,p.a.post("/auth/register",{email:l,password:f});case 3:t=e.sent,x(t.data.message),e.next=8;break;case 7:x("\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"auth"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Login"),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{id:"email",onChange:function(e){return c(e.target.value)},name:"email",type:"text",className:"validate",required:!0}),r.a.createElement("label",{htmlFor:"email"},"email"),r.a.createElement("span",{className:"helper-text","data-error":"input email"})),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{id:"password",onChange:function(e){return h(e.target.value)},name:"password",type:"password",className:"validate",required:!0}),r.a.createElement("label",{htmlFor:"password"},"password"),r.a.createElement("span",{className:"helper-text","data-error":"input password"})),r.a.createElement("div",null,r.a.createElement("span",null,j)),r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement(d.b,{to:"/reset"},"reset password")),r.a.createElement("button",{className:"btn waves-effect waves-light",onClick:y,type:"submit"},"login",r.a.createElement("i",{className:"material-icons right"},"login")),r.a.createElement("button",{style:{marginLeft:"10px"},onClick:k,className:"btn waves-effect waves-light",type:"submit"},"register")))},g=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],l=t[1],s=Object(n.useState)(""),c=Object(u.a)(s,2),o=c[0],E=c[1],f=Object(n.useState)(""),h=Object(u.a)(f,2),v=h[0],b=h[1],w=Object(n.useState)(""),g=Object(u.a)(w,2),N=g[0],O=g[1];Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("login"));function t(){return(t=Object(m.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("/profile",{headers:{authorization:e.token}});case 2:a=t.sent,b(a.data.img),O(a.data.email);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}l(e.token),function(){t.apply(this,arguments)}()}),[]);var j=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files[0],E(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(m.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("avatar",o),e.next=4,p.a.post("/profile",t,{headers:{authorization:a}});case 4:n=e.sent,b(n.data.img),console.log(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"left"},r.a.createElement("h1",null,"Profile photo"),v?r.a.createElement("div",null,r.a.createElement("img",{src:v,alt:"img",width:"300"})):r.a.createElement("div",null,"\u043d\u0435\u0442 \u0444\u043e\u0442\u043e")),r.a.createElement("div",{className:"right",style:{marginTop:"100px"}},r.a.createElement("span",null,r.a.createElement("h5",null,"\u0432\u0430\u0448 email"),N),r.a.createElement("div",{className:"file-field input-field"},r.a.createElement("div",{className:"btn"},r.a.createElement("span",null,"File"),r.a.createElement("input",{onChange:function(e){return j(e)},name:"avatar",type:"file"})),r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement("input",{className:"file-path validate",type:"text"}))),r.a.createElement("button",{className:"btn waves-effect waves-light",onClick:x},"change photo"),r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement(d.b,{to:"/users"},"All Users")))))},N=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,O=function(){var e=Object(s.g)(),t=Object(n.useState)(""),a=Object(u.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(""),d=Object(u.a)(o,2),E=d[0],f=d[1],h=function(){var t=Object(m.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!N.test(l)){t.next=6;break}return t.next=3,p.a.post("/auth/reset",{email:l});case 3:a=t.sent,f(a.data.message),"\u043d\u0435\u0442 \u0442\u0430\u043a\u043e\u0433\u043e \u044e\u0437\u0435\u0440\u0430"!==a.data.message&&e.push("/auth");case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"Reset"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Reset password"),r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"input-field col s12"},r.a.createElement("input",{onChange:function(e){return c(e.target.value)},id:"email",type:"email",class:"validate"}),r.a.createElement("label",{for:"email"},"Email")),r.a.createElement("div",{style:{marginTop:"10px",marginBottom:"5px"}},r.a.createElement("span",null,E)),r.a.createElement("button",{onClick:h,class:"btn waves-effect waves-light",type:"submit",name:"action"},"reset",r.a.createElement("i",{class:"material-icons right"},"send")))))},j=function(e){var t=Object(s.g)(),a=Object(n.useState)(""),l=Object(u.a)(a,2),c=l[0],o=l[1],d=Object(n.useState)(""),E=Object(u.a)(d,2),f=E[0],h=E[1];Object(n.useEffect)((function(){function t(){return(t=Object(m.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("/auth/password/".concat(e.match.params.token));case 2:(a=t.sent).data.user&&h(a.data.user.userId);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.match.params.token]);var v=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c.length>1)){e.next=4;break}return e.next=3,p.a.post("/auth/password",{password:c,userId:f});case 3:t.push("/auth");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"Reset"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"New password"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:function(e){return o(e.target.value)},id:"password",type:"password",className:"validate",required:!0}),r.a.createElement("label",{htmlFor:"email"},"Password")),r.a.createElement("button",{onClick:v,className:"btn waves-effect waves-light",type:"submit",name:"action"},"new password",r.a.createElement("i",{className:"material-icons right"},"send")))))};var x=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/auth",exact:!0,component:w}),r.a.createElement(s.b,{path:"/users",exact:!0,component:E}),r.a.createElement(s.b,{path:"/users/create",component:f}),r.a.createElement(s.b,{path:"/users/:id",exact:!0,component:h}),r.a.createElement(s.b,{path:"/users/:id/edit",component:v}),r.a.createElement(s.b,{path:"/profile",component:g}),r.a.createElement(s.b,{path:"/reset",component:O}),r.a.createElement(s.b,{path:"/auth/password/:token",component:j}),r.a.createElement(s.a,{to:"/auth"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(l.render)(r.a.createElement(d.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.4f8adb98.chunk.js.map